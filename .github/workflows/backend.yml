name: Backend CI/CD

on:
  push:
    branches: [ main ]
    paths:
      - 'phoneza-backend/**'

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '20'
    
    - name: Install dependencies
      working-directory: ./phoneza-backend
      run: npm install
    
    - name: Run tests
      working-directory: ./phoneza-backend
      run: npm test -- --passWithNoTests
    
    - name: Deploy to Railway
      uses: bervProject/railway-deploy@main
      with:
        railway_token: ${{ secrets.RAILWAY_TOKEN }}
        service: phoneza-backend
```

---

## ğŸ” Secrets quraÅŸdÄ±rmaq:

**GitHub-da:**

1. Repository-nizÉ™ gedin
2. **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. **New repository secret**
4. ÆlavÉ™ edin:
   - `VERCEL_TOKEN`
   - `VERCEL_ORG_ID`
   - `VERCEL_PROJECT_ID`
   - `RAILWAY_TOKEN`
   - `MONGODB_URI`
   - `JWT_SECRET`

---

## ğŸ“Š CI/CD Pipeline strukturu:
```
phoneza/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ frontend.yml      # Frontend CI/CD
â”‚       â”œâ”€â”€ backend.yml       # Backend CI/CD
â”‚       â””â”€â”€ tests.yml         # TestlÉ™r
â”œâ”€â”€ phoneza-frontend/
â”œâ”€â”€ phoneza-backend/
â””â”€â”€ README.md